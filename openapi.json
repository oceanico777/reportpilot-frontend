{"openapi":"3.1.0","info":{"title":"ReportPilot AI API","description":"\n    ## ­ƒÜÇ Automated Receipt Processing & Reporting API\n    \n    ### Features\n    - ­ƒô© OCR receipt processing with Google Gemini AI\n    - ­ƒôè Automated expense report generation\n    - ­ƒöÉ Multi-tenant with company-level isolation\n    - ­ƒôü Secure file storage with Supabase\n    \n    ### Authentication\n    All endpoints (except `/health`) require Bearer token authentication.\n    Use your Supabase JWT token in the Authorization header.\n    ","version":"2.0.3"},"paths":{"/auth/login":{"post":{"tags":["Auth"],"summary":"Login","operationId":"login_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/receipts/upload":{"post":{"tags":["Receipts"],"summary":"Upload Receipt","operationId":"upload_receipt_receipts_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_receipt_receipts_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Receipt"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/receipts/":{"get":{"tags":["Receipts"],"summary":"Read Receipts","operationId":"read_receipts_receipts__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Receipt"},"title":"Response Read Receipts Receipts  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/receipts/{receipt_id}":{"get":{"tags":["Receipts"],"summary":"Read Receipt","operationId":"read_receipt_receipts__receipt_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"receipt_id","in":"path","required":true,"schema":{"type":"string","title":"Receipt Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Receipt"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/purchases":{"post":{"tags":["Purchases","purchases"],"summary":"Create Purchase","operationId":"create_purchase_purchases_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PurchaseCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Purchase"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Purchases","purchases"],"summary":"List Purchases","operationId":"list_purchases_purchases_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Start Date"}},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"End Date"}},{"name":"provider_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Provider Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Purchase"},"title":"Response List Purchases Purchases Get"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/purchases/{purchase_id}":{"get":{"tags":["Purchases","purchases"],"summary":"Read Purchase","operationId":"read_purchase_purchases__purchase_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"purchase_id","in":"path","required":true,"schema":{"type":"string","title":"Purchase Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Purchase"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/purchases/dashboard-stats":{"get":{"tags":["Purchases","purchases"],"summary":"Get Dashboard Stats","operationId":"get_dashboard_stats_purchases_dashboard_stats_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Start Date"}},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"End Date"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Dashboard Stats Purchases Dashboard Stats Get"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/purchases/price-trends":{"get":{"tags":["Purchases","purchases"],"summary":"Get Price Trends","operationId":"get_price_trends_purchases_price_trends_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"query","in":"query","required":true,"schema":{"type":"string","minLength":2,"title":"Query"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Get Price Trends Purchases Price Trends Get"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/purchases/provider-trends":{"get":{"tags":["Purchases","purchases"],"summary":"Get Provider Trends","operationId":"get_provider_trends_purchases_provider_trends_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"months","in":"query","required":false,"schema":{"type":"integer","default":6,"title":"Months"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Get Provider Trends Purchases Provider Trends Get"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/products":{"get":{"tags":["Products","products"],"summary":"Get Products","operationId":"get_products_products_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"provider_id","in":"query","required":false,"schema":{"type":"string","title":"Provider Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Product"},"title":"Response Get Products Products Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Products","products"],"summary":"Create Product","operationId":"create_product_products_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Product"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/recipes/recipes/":{"get":{"tags":["Recipes","recipes"],"summary":"Get Recipes","operationId":"get_recipes_recipes_recipes__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/RecipeOut"},"type":"array","title":"Response Get Recipes Recipes Recipes  Get"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["Recipes","recipes"],"summary":"Create Recipe","operationId":"create_recipe_recipes_recipes__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecipeCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Create Recipe Recipes Recipes  Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/recipes/recipes/{recipe_id}/items":{"post":{"tags":["Recipes","recipes"],"summary":"Add Recipe Item","operationId":"add_recipe_item_recipes_recipes__recipe_id__items_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"recipe_id","in":"path","required":true,"schema":{"type":"string","title":"Recipe Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecipeItemCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Add Recipe Item Recipes Recipes  Recipe Id  Items Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/recipes/recipes/{recipe_id}/items/{item_id}":{"delete":{"tags":["Recipes","recipes"],"summary":"Delete Recipe Item","operationId":"delete_recipe_item_recipes_recipes__recipe_id__items__item_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"recipe_id","in":"path","required":true,"schema":{"type":"string","title":"Recipe Id"}},{"name":"item_id","in":"path","required":true,"schema":{"type":"string","title":"Item Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/providers":{"get":{"tags":["Providers","providers"],"summary":"Read Providers","operationId":"read_providers_providers_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Provider"},"title":"Response Read Providers Providers Get"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Providers","providers"],"summary":"Create Provider","operationId":"create_provider_providers_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProviderCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Provider"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/providers/{provider_id}":{"put":{"tags":["Providers","providers"],"summary":"Update Provider","operationId":"update_provider_providers__provider_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"provider_id","in":"path","required":true,"schema":{"type":"string","title":"Provider Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProviderCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Provider"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Providers","providers"],"summary":"Delete Provider","operationId":"delete_provider_providers__provider_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"provider_id","in":"path","required":true,"schema":{"type":"string","title":"Provider Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/exports/exports/providers-excel":{"get":{"tags":["Exports","Exports"],"summary":"Export Providers Excel","description":"Generates an Excel file with:\n1. Summary by Provider (Total Spent)\n2. Detailed Purchase History","operationId":"export_providers_excel_exports_exports_providers_excel_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/auth/join":{"post":{"tags":["Users"],"summary":"Join Organization","description":"Join an organization using an Invite Code.","operationId":"join_organization_auth_join_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_join_organization_auth_join_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/admin/team":{"get":{"tags":["Users"],"summary":"Get Team Members","description":"List all members of the organization. Admin only.","operationId":"get_team_members_admin_team_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/admin/deactivate/{user_id}":{"patch":{"tags":["Users"],"summary":"Deactivate Member","operationId":"deactivate_member_admin_deactivate__user_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/users":{"post":{"tags":["Users"],"summary":"Create User Manual","description":"Manually provision a user. \nUseful if invite codes are not desired.\nUser will claim this account upon first login/signup with matching email.","operationId":"create_user_manual_admin_users_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreateAdmin"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/budgets":{"post":{"tags":["Budgets","budgets"],"summary":"Create Or Update Budget","operationId":"create_or_update_budget_budgets_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryBudgetCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryBudget"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Budgets","budgets"],"summary":"List Budgets","operationId":"list_budgets_budgets_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"period","in":"query","required":false,"schema":{"type":"string","default":"MONTHLY","title":"Period"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CategoryBudget"},"title":"Response List Budgets Budgets Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/budgets/status":{"get":{"tags":["Budgets","budgets"],"summary":"Get Budget Status","description":"Compares Budget vs Actual Spend for the current period.","operationId":"get_budget_status_budgets_status_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"period","in":"query","required":false,"schema":{"type":"string","default":"MONTHLY","title":"Period"}},{"name":"month","in":"query","required":false,"schema":{"type":"integer","title":"Month"}},{"name":"year","in":"query","required":false,"schema":{"type":"integer","title":"Year"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/closures/summary":{"get":{"tags":["Closures","closures"],"summary":"Get Daily Summary","operationId":"get_daily_summary_closures_summary_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"date_str","in":"query","required":false,"schema":{"type":"string","title":"Date Str"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailyClosureSummary"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/closures/close":{"post":{"tags":["Closures","closures"],"summary":"Close Day","operationId":"close_day_closures_close_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_close_day_closures_close_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailyClosure"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/closures":{"get":{"tags":["Closures","closures"],"summary":"List Closures","operationId":"list_closures_closures_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DailyClosure"},"title":"Response List Closures Closures Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reports/admin/export-zip":{"post":{"tags":["Reports"],"summary":"Export Zip Endpoint","operationId":"export_zip_endpoint_reports_admin_export_zip_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"month","in":"query","required":true,"schema":{"type":"integer","title":"Month"}},{"name":"year","in":"query","required":true,"schema":{"type":"integer","title":"Year"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status: 'paid', 'pending', or None for all","title":"Status"},"description":"Filter by status: 'paid', 'pending', or None for all"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reports/upload":{"post":{"tags":["Reports"],"summary":"Upload File","operationId":"upload_file_reports_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_file_reports_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/reports/generate":{"post":{"tags":["Reports"],"summary":"Generate Report","operationId":"generate_report_reports_generate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PurchaseCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Purchase"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/reports":{"get":{"tags":["Reports"],"summary":"List Reports","operationId":"list_reports_reports_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"month","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Month"}},{"name":"year","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Year"}},{"name":"tour_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tour Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Purchase"},"title":"Response List Reports Reports Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reports/{report_id}/approve":{"patch":{"tags":["Reports"],"summary":"Approve Report","operationId":"approve_report_reports__report_id__approve_patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"report_id","in":"path","required":true,"schema":{"type":"string","title":"Report Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Purchase"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reports/{report_id}/reject":{"patch":{"tags":["Reports"],"summary":"Reject Report","operationId":"reject_report_reports__report_id__reject_patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"report_id","in":"path","required":true,"schema":{"type":"string","title":"Report Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Purchase"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reports/budget":{"get":{"tags":["Reports"],"summary":"Get Budget","operationId":"get_budget_reports_budget_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"tour_id","in":"query","required":true,"schema":{"type":"string","title":"Tour Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Budget Reports Budget Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Reports"],"summary":"Set Budget","operationId":"set_budget_reports_budget_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryBudgetCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Set Budget Reports Budget Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reports/summary":{"get":{"tags":["Reports"],"summary":"Get Tour Summary","description":"Calculates the balance for a specific tour.\nBalance = (Budget + Total Collections) - Total Expenses","operationId":"get_tour_summary_reports_summary_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"tour_id","in":"query","required":true,"schema":{"type":"string","title":"Tour Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Tour Summary Reports Summary Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reports/admin/summary":{"get":{"tags":["Reports"],"summary":"Get Admin Summary","description":"Returns a list of all tours with their financial status for the accountant.","operationId":"get_admin_summary_reports_admin_summary_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"month","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Month"}},{"name":"year","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Year"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reports/dashboard-stats":{"get":{"tags":["Reports"],"summary":"Get Dashboard Stats","operationId":"get_dashboard_stats_reports_dashboard_stats_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Start Date"}},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"End Date"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Dashboard Stats Reports Dashboard Stats Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reports/admin/transactions":{"get":{"tags":["Reports"],"summary":"List Admin Transactions","description":"Returns a flat list of ALL transactions for the company, filtered by period.\nDesigned for the 'S├íbana de Datos' view in Accountant Dashboard.","operationId":"list_admin_transactions_reports_admin_transactions_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"month","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Month"}},{"name":"year","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Year"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Purchase"},"title":"Response List Admin Transactions Reports Admin Transactions Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reports/price-trends":{"get":{"tags":["Reports"],"summary":"Get Price Trends","description":"Returns price history for a given product name (fuzzy search).","operationId":"get_price_trends_reports_price_trends_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"query","in":"query","required":true,"schema":{"type":"string","minLength":2,"title":"Query"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Get Price Trends Reports Price Trends Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reports/provider-trends":{"get":{"tags":["Reports"],"summary":"Get Provider Trends","description":"Returns monthly spending trends per provider for the last N months.\nOutput: [{ \"month\": \"Jan\", \"Coca Cola\": 100, \"MacPollo\": 200 }, ...]","operationId":"get_provider_trends_reports_provider_trends_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"months","in":"query","required":false,"schema":{"type":"integer","default":6,"title":"Months"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Get Provider Trends Reports Provider Trends Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Read Root","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_close_day_closures_close_post":{"properties":{"date_str":{"type":"string","title":"Date Str"},"signature":{"type":"string","format":"binary","title":"Signature"},"total_sales":{"type":"number","title":"Total Sales","default":0.0}},"type":"object","required":["date_str","signature"],"title":"Body_close_day_closures_close_post"},"Body_join_organization_auth_join_post":{"properties":{"invite_code":{"type":"string","title":"Invite Code"}},"type":"object","required":["invite_code"],"title":"Body_join_organization_auth_join_post"},"Body_upload_file_reports_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_file_reports_upload_post"},"Body_upload_receipt_receipts_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_receipt_receipts_upload_post"},"CategoryBudget":{"properties":{"category":{"type":"string","title":"Category"},"budget_amount":{"type":"number","title":"Budget Amount"},"period":{"type":"string","title":"Period","default":"MONTHLY"},"id":{"type":"string","title":"Id"},"company_id":{"type":"string","title":"Company Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["category","budget_amount","id","company_id","created_at","updated_at"],"title":"CategoryBudget"},"CategoryBudgetCreate":{"properties":{"category":{"type":"string","title":"Category"},"budget_amount":{"type":"number","title":"Budget Amount"},"period":{"type":"string","title":"Period","default":"MONTHLY"}},"type":"object","required":["category","budget_amount"],"title":"CategoryBudgetCreate"},"DailyClosure":{"properties":{"date":{"type":"string","format":"date","title":"Date"},"total_sales":{"type":"number","title":"Total Sales"},"total_expenses":{"type":"number","title":"Total Expenses"},"cash_in_hand":{"type":"number","title":"Cash In Hand"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"id":{"type":"string","title":"Id"},"company_id":{"type":"string","title":"Company Id"},"closed_at":{"type":"string","format":"date-time","title":"Closed At"},"closed_by_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Closed By Email"}},"type":"object","required":["date","total_sales","total_expenses","cash_in_hand","id","company_id","closed_at"],"title":"DailyClosure"},"DailyClosureSummary":{"properties":{"date":{"type":"string","format":"date","title":"Date"},"total_sales":{"type":"number","title":"Total Sales"},"total_expenses":{"type":"number","title":"Total Expenses"},"total_advances":{"type":"number","title":"Total Advances","default":0.0},"total_collections":{"type":"number","title":"Total Collections","default":0.0},"balance":{"type":"number","title":"Balance"}},"type":"object","required":["date","total_sales","total_expenses","balance"],"title":"DailyClosureSummary"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ParsedData":{"properties":{"vendor":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vendor"},"date":{"anyOf":[{},{"type":"null"}],"title":"Date"},"amount":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Amount"},"currency":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Currency"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"confidence_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Confidence Score"},"items":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Items"},"id":{"type":"string","title":"Id"},"receipt_id":{"type":"string","title":"Receipt Id"}},"type":"object","required":["id","receipt_id"],"title":"ParsedData"},"Product":{"properties":{"name":{"type":"string","title":"Name"},"unit":{"type":"string","title":"Unit","default":"unit"},"provider_id":{"type":"string","title":"Provider Id"},"last_price":{"type":"number","title":"Last Price","default":0.0},"id":{"type":"string","title":"Id"},"company_id":{"type":"string","title":"Company Id"}},"type":"object","required":["name","provider_id","id","company_id"],"title":"Product"},"ProductCreate":{"properties":{"name":{"type":"string","title":"Name"},"unit":{"type":"string","title":"Unit","default":"unit"},"provider_id":{"type":"string","title":"Provider Id"},"last_price":{"type":"number","title":"Last Price","default":0.0}},"type":"object","required":["name","provider_id"],"title":"ProductCreate"},"Provider":{"properties":{"name":{"type":"string","title":"Name"},"contact_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Name"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"frequency":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Frequency"},"id":{"type":"string","title":"Id"},"company_id":{"type":"string","title":"Company Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["name","id","company_id","created_at"],"title":"Provider"},"ProviderCreate":{"properties":{"name":{"type":"string","title":"Name"},"contact_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact Name"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"frequency":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Frequency"}},"type":"object","required":["name"],"title":"ProviderCreate"},"Purchase":{"properties":{"date":{"type":"string","format":"date","title":"Date"},"provider_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Provider Id"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"amount":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Amount"},"currency":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Currency","default":"COP"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"invoice_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Invoice Number"},"month":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Month"},"year":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Year"},"tour_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tour Id"},"client_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Name"},"vendor":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vendor"},"id":{"type":"string","title":"Id"},"company_id":{"type":"string","title":"Company Id"},"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"},"storage_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Storage Path"},"file_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Url"},"status":{"type":"string","title":"Status"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"is_duplicate":{"type":"boolean","title":"Is Duplicate","default":false},"potential_duplicate_of":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Potential Duplicate Of"},"provider":{"anyOf":[{"$ref":"#/components/schemas/Provider"},{"type":"null"}]}},"type":"object","required":["date","id","company_id","status","created_at"],"title":"Purchase"},"PurchaseCreate":{"properties":{"date":{"type":"string","format":"date","title":"Date"},"provider_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Provider Id"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"amount":{"type":"number","exclusiveMinimum":0.0,"title":"Amount"},"currency":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Currency","default":"COP"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"invoice_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Invoice Number"},"month":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Month"},"year":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Year"},"tour_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tour Id"},"client_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Name"},"vendor":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vendor"},"company_id":{"type":"string","title":"Company Id"},"source_file_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source File Path"},"extracted_data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Extracted Data"}},"type":"object","required":["date","amount","company_id"],"title":"PurchaseCreate"},"Receipt":{"properties":{"file_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Url"},"id":{"type":"string","title":"Id"},"company_id":{"type":"string","title":"Company Id"},"status":{"type":"string","title":"Status"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"processed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Processed At"},"storage_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Storage Path"},"filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Filename"},"content_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content Type"},"parsed_data":{"anyOf":[{"$ref":"#/components/schemas/ParsedData"},{"type":"null"}]}},"type":"object","required":["id","company_id","status","created_at"],"title":"Receipt"},"RecipeCreate":{"properties":{"name":{"type":"string","title":"Name"},"sale_price":{"type":"number","title":"Sale Price","default":0.0}},"type":"object","required":["name"],"title":"RecipeCreate"},"RecipeItemCreate":{"properties":{"product_id":{"type":"string","title":"Product Id"},"quantity":{"type":"number","title":"Quantity"}},"type":"object","required":["product_id","quantity"],"title":"RecipeItemCreate"},"RecipeItemOut":{"properties":{"id":{"type":"string","title":"Id"},"product_name":{"type":"string","title":"Product Name"},"quantity":{"type":"number","title":"Quantity"},"unit":{"type":"string","title":"Unit"},"unit_price":{"type":"number","title":"Unit Price"},"total_cost":{"type":"number","title":"Total Cost"}},"type":"object","required":["id","product_name","quantity","unit","unit_price","total_cost"],"title":"RecipeItemOut"},"RecipeOut":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"sale_price":{"type":"number","title":"Sale Price"},"total_cost":{"type":"number","title":"Total Cost"},"margin":{"type":"number","title":"Margin"},"items":{"items":{"$ref":"#/components/schemas/RecipeItemOut"},"type":"array","title":"Items","default":[]}},"type":"object","required":["id","name","sale_price","total_cost","margin"],"title":"RecipeOut"},"UserCreate":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"},"role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Role","default":"STAFF"}},"type":"object","required":["email"],"title":"UserCreate"},"UserCreateAdmin":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"},"role":{"type":"string","title":"Role"}},"type":"object","required":["email","role"],"title":"UserCreateAdmin"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}
